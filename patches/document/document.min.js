"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_setData=function(e,t,r){e.setData(_defineProperty({},t,r))},_search=function e(t,r,n,o){for(var i=0;i<t.length;i++)if("text"!=t[i].type){if(n+="["+i+"]",t[i].attrs.id==r)return new element(t[i],n,o);n+=".children";var s=e(t[i].children,r,n,o);if(null!=s)return s;n=n.substring(0,n.length-9),n=n.substring(0,n.length-("["+i+"]").length)}return null},error1={ok:!1,errCode:1,errMsg:"仅允许对文本标签进行修改"},error2={ok:!1,errCode:2,errMsg:"错误的类型"},error3={ok:!1,errCode:3,errMsg:"传入值超出范围"},error4={ok:!1,errCode:4,errMsg:"没有找到对应的标签"},element=function(){function e(t,r,n){_classCallCheck(this,e),this.id="text"==t.type?"":t.attrs.id,this.nodes=t,this._site=r,this._Component=n,"text"==t.children[0].type&&(this._text=!0)}return _createClass(e,[{key:"setText",value:function(e){return this._text?"string"!=typeof e?error2:(this.nodes.children[0].text=e,_setData(this._Component,this._site,this.nodes),{ok:!0}):error1}},{key:"getText",value:function(){return this._text?{ok:!0,data:this.nodes.children[0].text}:error1}},{key:"addChildren",value:function(e,t){return e&&"object"==(void 0===e?"undefined":_typeof(e))&&"number"==typeof t?t<0||t>this.nodes.children.length?error3:(this.nodes.children.splice(t,0,e),_setData(this._Component,this._site,this.nodes),{ok:!0}):error2}},{key:"removeChildren",value:function(e){return"number"!=typeof e?error2:e<0||e>=this.nodes.children.length?error3:(this.nodes.children.splice(e,1),_setData(this._Component,this._site,this.nodes),{ok:!0})}},{key:"getChildren",value:function(t){return"number"!=typeof t?error2:t<0||t>=this.nodes.children.length?error3:{ok:!0,data:new e(this.nodes.childrens[t],this._site+".children["+t+"]",this._Component)}}},{key:"getAttr",value:function(e){return"string"!=typeof e?error2:{ok:!0,data:this.nodes.attrs[e]}}},{key:"setAttr",value:function(e,t){return"string"!=typeof e?error2:(this.nodes.attrs[e]=t,_setData(this._Component,this._site,this.nodes),{ok:!0})}},{key:"removeAttr",value:function(e){return"string"!=typeof e?error2:(_setData(this._Component,this._site,this.nodes),delete this.nodes.attrs[e],{ok:!0})}},{key:"getElementById",value:function(e){if("string"!=typeof e)return error2;var t=_search(this.nodes,e,this._site,this._Component);return null!=t?{ok:!0,data:t}:error4}},{key:"update",value:function(){return _setData(this._Component,this._site,this.nodes),{ok:!0}}}]),e}(),document=function(){function e(){_classCallCheck(this,e),this._root="",this.nodes=[],this._Component=null}return _createClass(e,[{key:"init",value:function(e,t,r){this._root=e,this.nodes=t,this._Component=r}},{key:"getElementById",value:function(e){if("string"!=typeof e)return error2;var t=_search(this.nodes,e,this._root,this._Component);return null!=t?{ok:!0,data:t}:error4}},{key:"getChildren",value:function(e){return(void 0===e?"undefined":_typeof(e))!=number?error2:e<0||e>=this.nodes.children.length?error3:{ok:!0,data:new element(this.nodes.childrens[e],this._root+".children["+e+"]",this._Component)}}}]),e}();module.exports=document;