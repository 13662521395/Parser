"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Document;try{Document=require("./document.js")}catch(t){}var html2nodes=require("./Parser.js"),initData=function(t){setTimeout(function(){t.navigateTo=function(e){function o(t,o){var i=o.createSelectorQuery();i.select(t).boundingClientRect(),i.selectViewport().scrollOffset(),i.exec(function(t){if(!t||!t[0])return e.fail({errMsg:"Label Not Found"});swan.pageScrollTo({scrollTop:t[1].scrollTop+t[0].top,success:e.success,fail:e.fail})})}if(e.success=e.success||function(){},e.fail=e.fail||function(){},e.id){var i=!0,n=!1,a=void 0;try{for(var r,s=t.anchors[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var c=r.value;c.id==e.id&&o("#"+e.id,c.node)}}catch(t){n=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}}else o("#contain",t)},t.createSelectorQuery().select("#contain"+t.id).boundingClientRect(function(e){t.triggerEvent("ready",e)}).exec()},50)};Component({attached:function(){getApp()._Parser=this},properties:{html:{type:null,value:"",observer:function(t){var e=this,o={},i={};if(this.data.showWithAnimation&&(o=swan.createAnimation({duration:this.data.animationDuration,timingFunction:"ease"}).opacity(0).step().export(),i=swan.createAnimation({duration:this.data.animationDuration,timingFunction:"ease"}).opacity(1).step().export()),t)if("string"==typeof t)html2nodes(t,this.data).then(function(t){e.setData({nodes:t.nodes,controls:{},showAnimation:i,hideAnimation:o},initData(e)),Document&&(e.document=new Document("nodes",t.nodes,e)),e.videoContext=[],e.anchors=[],t.title&&e.data.autosetTitle&&swan.setNavigationBarTitle({title:t.title}),e.imgList=t.imgList,e.triggerEvent("parse",t)}).catch(function(t){e.triggerEvent("error",{source:"parse",errMsg:t})});else if(t.constructor==Array)this.setData({controls:{},showAnimation:i,hideAnimation:o},initData(this)),Document&&(this.document=new Document("html",t,this)),this.videoContext=[],this.anchors=[],this.imgList=[];else if("object"==(void 0===t?"undefined":_typeof(t))){if(!t.nodes||t.nodes.constructor!=Array){if(t.name&&t.children&&t.attrs||"text"==t.type)return;return void this.triggerEvent("error",{source:"parse",errMsg:"传入的nodes数组格式不正确！应该传入的类型是array，实际传入的类型是："+_typeof(t.nodes)})}this.setData({controls:{},showAnimation:i,hideAnimation:o},initData(this)),Document&&(this.document=new Document("html.nodes",t.nodes,this)),this.videoContext=[],this.anchors=[],t.title&&this.data.autosetTitle&&swan.setNavigationBarTitle({title:t.title}),this.imgList=t.imgList||[]}else this.triggerEvent("error",{source:"parse",errMsg:"错误的html类型："+(void 0===t?"undefined":_typeof(t))});else this.setData({nodes:[]})}},autocopy:{type:Boolean,value:!0},autopause:{type:Boolean,value:!0},autopreview:{type:Boolean,value:!0},autosetTitle:{type:Boolean,value:!0},domain:{type:String,value:""},imgMode:{type:String,value:"default"},selectable:{type:Boolean,value:!1},tagStyle:{type:Object,value:{}},showWithAnimation:{type:Boolean,value:!1},animationDuration:{type:Number,value:400},useAnchor:{type:Boolean,value:!1}}});